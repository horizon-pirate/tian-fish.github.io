<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Hello, World</title>
    <style type="text/css">
        html{height:100%}
        body{height:90%;width:90%;margin:0px;padding:0px}
        #container{height:90%}
    </style>
    <!--引用百度地图的APi使用-->
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=QFi4I2CETTpbhR8GzGOoUDLB7ix20IXG">
    </script>
</head>

<body>
    <p id="demo">点击这个按钮，获得您的坐标：</p>
    <button onclick="getLocation()">试一下</button>
    <div id="container"></div>
    <script type="text/javascript">


        // 创建地图实例
        var map = new BMap.Map("container");
        // 创建默认点坐标，此坐标为北京天安门
        var point = new BMap.Point(23.147, 113.332);
        // 初始化地图，设置中心点坐标和地图级别15
        map.centerAndZoom(point, 15);


        var x=document.getElementById("demo");
        //判断浏览器是否能够使用定位功能
        function getLocation(){
            if (navigator.geolocation){
                navigator.geolocation.getCurrentPosition(showPosition,showError);
            }else{
                x.innerHTML="Geolocation is not supported by this browser.";
            }
        }
        //定位使用成功则调用此方法
        function showPosition(position)
        {
            //调用成功获得经纬度
            x.innerHTML="Latitude: " + position.coords.latitude +
            "<br />Longitude: " + position.coords.longitude;

            window.setTimeout(function(){
                //两秒后移动到当前定位位置
                map.panTo(new BMap.Point(position.coords.latitude, position.coords.longitude));
            }, 2000);
        }
        //定位功能使用失败
        function showError(error){
              switch(error.code)
              {
                case error.PERMISSION_DENIED:
                x.innerHTML="User denied the request for Geolocation."
                break;
                case error.POSITION_UNAVAILABLE:
                x.innerHTML="Location information is unavailable."
                break;
                case error.TIMEOUT:
                x.innerHTML="The request to get user location timed out."
                break;
                case error.UNKNOWN_ERROR:
                x.innerHTML="An unknown error occurred."
                break;
            }
        }
    </script>
</body>
</html>
